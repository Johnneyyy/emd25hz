# EMD/EEMD/FIF 분석 도구

0.2Hz~4Hz 주파수 대역을 대상으로 하는 EMD(Empirical Mode Decomposition), EEMD(Ensemble EMD), FIF(Fast Iterative Filtering) 분석 도구입니다.

## 주요 기능

- **CSV 파일 입력**: 다양한 CSV 파일에서 원하는 컬럼을 선택하여 분석
- **주파수 대역 필터링**: 0.2Hz~4Hz 주파수 대역에 특화된 분석
- **다중 분해 방법**: EMD, EEMD, FIF 세 가지 방법 지원
- **Hilbert 변환 분석**: 순간 주파수 및 에너지 분석
- **1초 단위 시간축**: 실시간 데이터 분석에 적합한 시간 해상도
- **직관적인 GUI**: 사용자 친화적인 그래픽 인터페이스
- **시각화**: 상세한 분석 결과 시각화
- **결과 저장**: 분석 결과를 CSV 파일로 저장

## 설치 방법

### 1. 필요한 패키지 설치

```bash
pip install -r requirements.txt
```

### 2. 샘플 데이터 생성 (선택사항)

```bash
python generate_sample_data.py
```

## 사용 방법

### 1. 분석 도구 실행

```bash
python emd_analysis_tool.py
```

### 2. GUI 사용법

#### 2.1 데이터 파일 선택
- "CSV 파일 선택" 버튼을 클릭하여 분석할 CSV 파일을 선택합니다.
- 파일이 로드되면 숫자형 컬럼들이 자동으로 감지됩니다.

#### 2.2 분석 설정
- **분석할 컬럼**: 드롭다운 메뉴에서 분석하고 싶은 데이터 컬럼을 선택합니다.
- **샘플링 주파수**: 데이터의 샘플링 주파수를 입력합니다 (기본값: 1.0Hz, 1초 단위).
- **주파수 대역**: 분석 대상 주파수 범위를 설정합니다 (기본값: 0.2Hz ~ 4.0Hz).

#### 2.3 분석 방법 선택
- **EMD**: 기본 경험적 모드 분해
- **EEMD**: 앙상블 경험적 모드 분해 (노이즈에 강함)
- **FIF**: 빠른 반복 필터링 (계산 효율적)

원하는 방법들을 체크박스로 선택할 수 있습니다.

#### 2.4 분석 실행
- "분석 실행" 버튼을 클릭하여 분석을 시작합니다.
- 진행 상태가 화면에 표시됩니다.
- 분석 완료 후 자동으로 결과 시각화가 표시됩니다.

#### 2.5 결과 저장
- "결과 저장" 버튼을 클릭하여 분석 결과를 CSV 파일로 저장할 수 있습니다.

## 분석 결과 해석

### IMF (Intrinsic Mode Functions)
각 방법은 원본 신호를 여러 개의 IMF로 분해합니다:
- **IMF 1**: 가장 높은 주파수 성분
- **IMF 2, 3, ...**: 점진적으로 낮은 주파수 성분들
- **Residual**: 잔여 성분 (트렌드)

### Hilbert 분석 결과
각 IMF에 대해 다음 정보를 제공합니다:
- **순간 주파수**: 시간에 따른 주파수 변화
- **순간 진폭**: 시간에 따른 진폭 변화
- **에너지**: 각 IMF의 총 에너지

### 시각화 결과

#### 1. 종합 비교 플롯
- **상단**: 각 방법의 주요 IMF들
- **중간**: 에너지 분포 막대 그래프
- **하단**: Hilbert 스펙트럼 (주파수-시간-진폭)

#### 2. 상세 분석 플롯
각 방법별로:
- 원본 신호 (필터링됨)
- 각 IMF별 상세 파형
- 잔여 성분

## 적용 분야

### 생체신호 분석
- **심박수 변동성 (HRV)**: 0.04Hz~0.4Hz 대역 분석
- **호흡 신호**: 0.1Hz~0.5Hz 대역 분석
- **뇌파 (EEG)**: 델타파, 세타파 분석

### 센서 데이터 분석
- 진동 신호 분석
- 환경 모니터링 데이터
- IoT 센서 데이터

### 시계열 데이터 분석
- 경제 데이터
- 기후 데이터
- 트렌드 분석

## 기술적 세부사항

### EMD (Empirical Mode Decomposition)
- 비선형, 비정상 신호에 적합
- Sifting 과정을 통한 IMF 추출
- 모드 혼합 문제 가능성

### EEMD (Ensemble EMD)
- 백색 잡음 추가로 모드 혼합 문제 완화
- 앙상블 평균으로 안정적인 결과
- 계산 시간이 상대적으로 오래 걸림

### FIF (Fast Iterative Filtering)
- 빠른 계산 속도
- 안정적인 분해 결과
- 마스크 기반 필터링

### Hilbert 변환
- 순간 주파수 및 진폭 계산
- 에너지 분포 분석
- 시간-주파수 분석

## 성능 최적화 팁

### 데이터 크기
- 권장 데이터 길이: 1000~10000 샘플
- 너무 긴 데이터는 계산 시간 증가
- 너무 짧은 데이터는 분해 품질 저하

### 주파수 설정
- 샘플링 주파수는 분석 대상 최고 주파수의 2배 이상 권장
- 주파수 대역을 너무 넓게 설정하면 불필요한 성분 포함

### 방법 선택
- **빠른 분석**: FIF 사용
- **정확한 분석**: EEMD 사용
- **기본 분석**: EMD 사용

## 문제 해결

### 일반적인 오류

#### "파일 로드 오류"
- CSV 파일 형식 확인
- 파일 경로에 한글이나 특수문자 포함 여부 확인
- 파일이 다른 프로그램에서 사용 중인지 확인

#### "분석 오류"
- 선택한 컬럼이 숫자형 데이터인지 확인
- 데이터에 NaN 값이 너무 많지 않은지 확인
- 샘플링 주파수 설정이 올바른지 확인

#### "메모리 오류"
- 데이터 크기를 줄이거나 샘플링 수행
- EEMD의 앙상블 수를 줄임 (기본값: 50)

### 성능 문제
- 큰 데이터의 경우 일부 구간만 선택하여 분석
- 불필요한 분석 방법 체크 해제
- 시각화 끄기 (코드 수정 필요)

## 예제 데이터

`generate_sample_data.py`를 실행하면 다음과 같은 샘플 데이터가 생성됩니다:

1. **HRV_Signal**: 심박수 변동성 유사 신호
2. **Respiratory_Signal**: 호흡 관련 신호
3. **EEG_Like_Signal**: 뇌파 유사 신호
4. **Complex_Biosignal**: 복합 생체 신호
5. **Amplitude_Modulated**: 진폭 변조 신호
6. **Frequency_Modulated**: 주파수 변조 신호

## 라이선스

이 프로젝트는 MIT 라이선스 하에 배포됩니다.

## 문의

기술적 문의나 버그 리포트는 이슈 트래커를 통해 제출해 주세요.

---

**참고**: 이 도구는 연구 및 교육 목적으로 개발되었습니다. 의료 진단이나 상업적 용도로 사용하기 전에 충분한 검증이 필요합니다.